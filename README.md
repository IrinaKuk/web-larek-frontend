# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

Документация к приложению
Данные и типы данных
1. Карточка товара:
```
export interface IProduct {
    id: string; // Уникальный идентификатор товара
    description: string; // Описание товара
    image: string; // URL-адрес изображения товара
    title: string; // Название товара
    category: string; // Категория товара
    price: number; // Цена товара
}
```
2. Массив карточек на главной странице:
```
export interface IProductsList {
    products: IProduct[]; // Массив объектов IProduct
    preview: string | null; // URL-адрес превью товара или null
}
```
3. Информация о товарах в корзине:
```
export type IBasket = Pick<IProduct, 'title' | 'price'>; // Тип данных, содержащий только название и цену товара
```

4. Форма ввода данных об адресе и способе доставки:
```
export interface IOrder {
    payment: string; // Способ оплаты
    adress: string; // Адрес доставки
}
```
5. Форма ввода контактных данных покупателя:
```
export interface IBuyerInfo {
    email: string; // Адрес электронной почты
    phone: string; // Номер телефона
}
```
6. Проверка валидации форм:
```
export interface IOrderData {
    CheckValidation(data: Record<keyof IOrder, string>): boolean; // Метод для проверки валидации формы IOrder
}
```
```
export interface IBuyerInfoData {
    CheckValidation(data: Record<keyof IBuyerInfo, string>): boolean; // Метод для проверки валидации формы IBuyerInfo
}
```
Архитектура приложения

Приложение реализовано с использованием архитектурного паттерна MVP (Model-View-Presenter):
Слой представления (View): Отвечает за отображение данных на странице.
Слой данных (Model): Отвечает за хранение и изменение данных.
Презентер (Presenter): Отвечает за связь между представлением и данными.
Базовый код
 Класс Api:
Предоставляет базовые методы для отправки HTTP-запросов.
Принимает в конструкторе базовый URL сервера и опциональный объект с заголовками запросов.
Методы:
get(): Выполняет GET-запрос на указанный URL.
post(): Выполняет POST-запрос на указанный URL с передачей данных в JSON формате.

 Класс EventEmitter:
Реализует брокер событий.
Используется для отправки и обработки событий в приложении.
Методы:
on(): Добавление обработчика на событие.
off(): Удаление обработчика с события.
emit(): Инициализация события.
trigger(): Возвращает функцию, которая запускает событие.
onAll(): Добавление обработчика на все события.
offAll(): Удаление всех обработчиков событий.


Слой представления
 Класс Page:
Отвечает за отображение корзины и массива карточек товаров на странице.
Управляет HTML-элементами страницы, отображающими корзину и каталог товаров.
Реализует методы для обновления содержимого HTML-элементов в соответствии с изменениями в данных модели.
Поля класса:
counter: number - счетчик элементов в корзине.
catalog: HTMLElement[] - массив элементов карточек товаров.

Класс Modal:

Реализует модальное окно.
Предоставляет методы open и close для управления отображением.
Поля класса:
modal: HTMLElement - элемент модального окна
events: IEvents - экземпляр брокера событий

Класс ModalWithBasket:

Расширяет класс Modal.
Реализует модальное окно с корзиной товаров.
Поля класса:
submitButton: HTMLButtonElement - кнопка подтверждения
_form: HTMLFormElement - элемент формы
formName: string - значение атрибута name формы
list: HTMLElement[] - коллекция элементов выбранных товаров
total: string - сумма заказа
Методы:
deleteCard(): удаление товара из корзины

 Класс ModalWithAddress:

Расширяет класс Modal.
Реализует модальное окно с формой для ввода адреса и выбора способа оплаты.
Поля класса:
submitButton: HTMLButtonElement - кнопка подтверждения
PaymentButton: HTMLButtonElement - кнопка выбора способа оплаты
_form: HTMLFormElement - элемент формы
formName: string - значение атрибута name формы
inputs: NodeListOf - коллекция элементов ввода формы
errors: Record<string, HTMLElement> - объект, хранящий элементы для вывода ошибок
Методы:
setError(): принимает объект с данными для отображения/скрытия ошибок.
showInputError(): отображает текст ошибки под полем ввода.
hideInputError(): скрывает текст ошибки под полем ввода.
clearModal(): очищает поля формы и сбрасывает состояния кнопок.

 Класс ModalWithContacts:

Расширяет класс Modal.
Реализует модальное окно с формой для ввода телефона и email.

Поля класса:

submitButton: HTMLButtonElement - кнопка подтверждения
_form: HTMLFormElement - элемент формы
formName: string - значение атрибута name формы
inputs: NodeListOf - коллекция элементов ввода формы
errors: Record<string, HTMLElement> - объект, хранящий элементы для вывода ошибок
Методы:
setError(): принимает объект с данными для отображения/скрытия ошибок.
showInputError(): отображает текст ошибки под полем ввода.
hideInputError(): скрывает текст ошибки под полем ввода.
clearModal(): очищает поля формы и сбрасывает состояния кнопок.

 Класс SuccessfulOrder:

Расширяет класс Modal.
Реализует модальное окно с сообщением об успешном оформлении заказа.

Взаимодействие компонентов

Взаимодействие между компонентами осуществляется через брокер событий (EventEmitter).
Список событий:
products:changed - изменение массива карточек товаров
product:selected - выбор товара (открытие модального окна с товаром)
basket:open - открытие модального окна с корзиной
basket:toggleItem - добавление/удаление товара из корзины
basket:order - оформление заказа из корзины
payment:change - выбор способа оплаты
address:input - ввод адреса доставки
order:submit - подтверждение данных для оплаты и доставки
email:input - ввод почтового адреса клиента
phone:input - ввод телефона клиента
contacts:submit - подтверждение контактных данных
order:complete - открытие окна с уведомлением об успешном оформлении заказа
order:validation - необходимость валидации формы с вводом адреса и способа оплаты
contacts::validation - необходимость валидации формы с контактными данными
